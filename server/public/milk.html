<html>
    <head>
        <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
<meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">
        <script src="./geotools.js" crossorigin="anonymous"></script>
        <script src="my-haversine.js"></script>
		<link rel="stylesheet" href="./style.css">


        <title>Where is the nearest Raw Milk</title>


        <style>
            .myOL{list-style:none}
            .mySpan{
                color:red;
                font-weight:bold
            }
            .overlay {
                box-sizing: border-box;
                border: 20px solid #ffcccb;
                position:fixed;
                left:20px;
                #right:20%;
                width: 800px;
                top:30px;
                bottom:30px;
                background:rgba(255, 204, 203, 1); /* use this */
                display:none;
            }
            .my-overlay-button{
                position:absolute; top:0; right:0;
            }
            .my-overlay-close-button{
                position:absolute; top:0; right:100;
            }
			#myInput{
				  position: initial;
				  opacity: 1;
				  #z-index: 0;
			}
        </style>
    </head>
    <body>

        <select name="example" class="mySelect">
              <option value="A">A</option>
        </select>
        <button type="button" id="myBtn" href='#' onclick='loadFilter();'>filters</button><br>
        <input type="text" id="myInput">
        <button type="button" id="myBtn" href='#' onclick='loadMs();'>Find</button>

        <div class="overlay">
            <button type="button" class="my-overlay-button" href='#' onclick='applyFilter();'>apply filter</button>
            <button type="button" class="my-overlay-close-button" href='' onclick='loadFilter();'>close</button>
            Cows
<div class="row">
  <div class="col">
    <h2>Open <b>multiple</b></h2>
    <div class="tabs">
      <div class="tab">
        <input type="checkbox" id="chck1">
        <label class="tab-label" for="chck1">Item 1</label>
        <div class="tab-content">
          Lorem ipsum dolor sit amet consectetur, adipisicing elit. Ipsum, reiciendis!
        </div>
      </div>
      <div class="tab">
        <input type="checkbox" id="chck2">
        <label class="tab-label" for="chck2">Item 2</label>
        <div class="tab-content">
          Lorem ipsum dolor sit amet consectetur adipisicing elit. A, in!
        </div>
      </div>
    </div>
  </div>
</div>
        </div>

        <ol class="myOL">

        </ol>


        <script>
            function getIt(){
                console.log("everything");
            }


			//try to load the xml
            function loadRs(ar){
				$.ajax({
					type: "GET",
					url: './files',
                    dataType: "json",
                    success: function (json) { parseRs(json, ar); }
				});
            }

            function parseRs(json, ar){
                var json = $(json);
                $.each(json, function(i,obj){
                    //console.log();                
                    $('.mySelect').append('<option value="'+i+'">'+obj+'</option>');

                });

                $('.mySelect').val("0");
            }

			//try to load the xml
            function loadMs(ar){
                $.ajax({
                    type: "GET",
                    url: './data/cv478jy',
                    dataType: "json",
                    success: function (json) { parseMs(json, ar);}
                });
                    
            }
            

            function parseMs(json, ar){
                var json = $(json);
                var myPostcode = $('.myInput').text();

                $.each(json, function(i,obj){
                    //console.log(obj);
                    var distance = Math.round(Number(obj['distance'])*10) / 10;


                    //now add the stuff here
                    $('.myOL').append('<li class="myLi"><span class="mySpan">Trading Name: </span>'
                        + obj.TradingName
                        + '<span class="mySpan">Address:  </span>'
                        + obj["Address1"] +", " + obj["Address2"] +", " + obj["Address3"] + ", " + obj["Address4"] +", "+ obj["Address5"] + ", "  + obj["PostCode"]
                        + '<span class="mySpan">Compliance rating: </span>'
                        + obj["ComplianceRating"]
                        + '<span class="mySpan">Has cows: </span>'
                        + obj['HasCows']
                        +'<span class="mySpan">Has goats: </span>'
                        + obj['HasGoats']
                        +'<span class="mySpan">Has horses: </span>'
                        + obj['HasHorses']
                        +'<span class="mySpan">Has sheep: </span>'
                        + obj['HasSheep']
                        +'<span class="mySpan">Has buffalo: </span>'
                        + obj['HasBuffalo']
                        +'<span class="mySpan">Distance: </span><span class="myDistSpan">'
                        +distance
                        +'</span>'
                        +'</li>')


                });

                //add sort code
                var ul = $(".myOL");
                var li = ul.children("li");
                li.detach().sort(function(a,b){
                    return Number($(a).find('.myDistSpan').text()) > Number($(b).find('.myDistSpan').text());
                });
                ul.append(li);
            }

            function loadFilter(){
                $(".overlay").fadeToggle();
                $( "#accordion" ).accordion( "refresh" );
            }

            $( function() {
                $( "#accordion" ).accordion({
                    collapsible: true
                });
                $( "#accordion" ).accordion({
                    heightStyle: "fill"
                });
            } );

            loadRs("");

        </script>
    </body>
</html>
